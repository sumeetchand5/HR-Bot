<h1>index.js</h1>
<pre><code class="lang-js">module.exports = <span class="function"><span class="keyword">function</span> <span class="params">(stream, cb)</span> {</span>
  <span class="keyword">var</span> chunks = []
  stream.on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(chunk)</span> {</span>
    chunks.push(chunk)
  })
  stream.once(<span class="string">'end'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="keyword">if</span> (cb) cb(<span class="literal">null</span>, Buffer.concat(chunks))
    cb = <span class="literal">null</span>
  })
  stream.once(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(err)</span> {</span>
    <span class="keyword">if</span> (cb) cb(err)
    cb = <span class="literal">null</span>
  })
}
</code></pre>