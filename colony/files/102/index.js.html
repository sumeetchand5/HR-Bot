<h1>index.js</h1>
<pre><code class="lang-js"><span class="comment">/* eslint-disable node/no-deprecated-api */</span>
<span class="keyword">var</span> buffer = require(<span class="string">'buffer'</span>)
<span class="keyword">var</span> Buffer = buffer.Buffer

<span class="comment">// alternative to using Object.keys for old browsers</span>
<span class="function"><span class="keyword">function</span> <span class="title">copyProps</span> <span class="params">(src, dst)</span> {</span>
  <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> src) {
    dst[key] = src[key]
  }
}
<span class="keyword">if</span> (Buffer.from &amp;&amp; Buffer.alloc &amp;&amp; Buffer.allocUnsafe &amp;&amp; Buffer.allocUnsafeSlow) {
  module.exports = buffer
} <span class="keyword">else</span> {
  <span class="comment">// Copy properties from require('buffer')</span>
  copyProps(buffer, exports)
  exports.Buffer = SafeBuffer
}

<span class="function"><span class="keyword">function</span> <span class="title">SafeBuffer</span> <span class="params">(arg, encodingOrOffset, length)</span> {</span>
  <span class="keyword">return</span> Buffer(arg, encodingOrOffset, length)
}

SafeBuffer.prototype = Object.create(Buffer.prototype)

<span class="comment">// Copy static methods from Buffer</span>
copyProps(Buffer, SafeBuffer)

SafeBuffer.from = <span class="function"><span class="keyword">function</span> <span class="params">(arg, encodingOrOffset, length)</span> {</span>
  <span class="keyword">if</span> (<span class="keyword">typeof</span> arg === <span class="string">'number'</span>) {
    <span class="keyword">throw</span> <span class="keyword">new</span> TypeError(<span class="string">'Argument must not be a number'</span>)
  }
  <span class="keyword">return</span> Buffer(arg, encodingOrOffset, length)
}

SafeBuffer.alloc = <span class="function"><span class="keyword">function</span> <span class="params">(size, fill, encoding)</span> {</span>
  <span class="keyword">if</span> (<span class="keyword">typeof</span> size !== <span class="string">'number'</span>) {
    <span class="keyword">throw</span> <span class="keyword">new</span> TypeError(<span class="string">'Argument must be a number'</span>)
  }
  <span class="keyword">var</span> buf = Buffer(size)
  <span class="keyword">if</span> (fill !== <span class="literal">undefined</span>) {
    <span class="keyword">if</span> (<span class="keyword">typeof</span> encoding === <span class="string">'string'</span>) {
      buf.fill(fill, encoding)
    } <span class="keyword">else</span> {
      buf.fill(fill)
    }
  } <span class="keyword">else</span> {
    buf.fill(<span class="number">0</span>)
  }
  <span class="keyword">return</span> buf
}

SafeBuffer.allocUnsafe = <span class="function"><span class="keyword">function</span> <span class="params">(size)</span> {</span>
  <span class="keyword">if</span> (<span class="keyword">typeof</span> size !== <span class="string">'number'</span>) {
    <span class="keyword">throw</span> <span class="keyword">new</span> TypeError(<span class="string">'Argument must be a number'</span>)
  }
  <span class="keyword">return</span> Buffer(size)
}

SafeBuffer.allocUnsafeSlow = <span class="function"><span class="keyword">function</span> <span class="params">(size)</span> {</span>
  <span class="keyword">if</span> (<span class="keyword">typeof</span> size !== <span class="string">'number'</span>) {
    <span class="keyword">throw</span> <span class="keyword">new</span> TypeError(<span class="string">'Argument must be a number'</span>)
  }
  <span class="keyword">return</span> buffer.SlowBuffer(size)
}
</code></pre>