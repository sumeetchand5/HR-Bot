<h1>index.js</h1>
<pre><code class="lang-js"><span class="keyword">var</span> createHash = require(<span class="string">'crypto'</span>).createHash 
<span class="keyword">var</span> Buffer = require(<span class="string">'buffer'</span>).Buffer
<span class="keyword">var</span> stringify = require(<span class="string">'json-stable-stringify'</span>)

module.exports = <span class="function"><span class="keyword">function</span> <span class="title">hash</span> <span class="params">(str, alg, format)</span> {</span>
  str = <span class="string">'string'</span> === <span class="keyword">typeof</span> str ? str
    : Buffer.isBuffer(str) ? str
    : stringify(str)
  <span class="keyword">return</span> createHash(alg || <span class="string">'sha1'</span>)
    .update(str, Buffer.isBuffer(str) ? <span class="literal">null</span> : <span class="string">'utf8'</span>).digest(format || <span class="string">'hex'</span>)
}

</code></pre>