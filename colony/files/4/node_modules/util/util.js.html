<h1>util/</h1>
<pre><code class="lang-js"><span class="comment">// Copyright Joyent, Inc. and other Node contributors.</span>
<span class="comment">//</span>
<span class="comment">// Permission is hereby granted, free of charge, to any person obtaining a</span>
<span class="comment">// copy of this software and associated documentation files (the</span>
<span class="comment">// "Software"), to deal in the Software without restriction, including</span>
<span class="comment">// without limitation the rights to use, copy, modify, merge, publish,</span>
<span class="comment">// distribute, sublicense, and/or sell copies of the Software, and to permit</span>
<span class="comment">// persons to whom the Software is furnished to do so, subject to the</span>
<span class="comment">// following conditions:</span>
<span class="comment">//</span>
<span class="comment">// The above copyright notice and this permission notice shall be included</span>
<span class="comment">// in all copies or substantial portions of the Software.</span>
<span class="comment">//</span>
<span class="comment">// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS</span>
<span class="comment">// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</span>
<span class="comment">// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN</span>
<span class="comment">// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,</span>
<span class="comment">// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR</span>
<span class="comment">// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE</span>
<span class="comment">// USE OR OTHER DEALINGS IN THE SOFTWARE.</span>

<span class="keyword">var</span> formatRegExp = <span class="regexp">/%[sdj%]/g</span>;
exports.format = <span class="keyword">function</span>(f) {
  <span class="keyword">if</span> (!isString(f)) {
    <span class="keyword">var</span> objects = [];
    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arguments.length; i++) {
      objects.push(inspect(arguments[i]));
    }
    <span class="keyword">return</span> objects.join(<span class="string">' '</span>);
  }

  <span class="keyword">var</span> i = <span class="number">1</span>;
  <span class="keyword">var</span> args = arguments;
  <span class="keyword">var</span> len = args.length;
  <span class="keyword">var</span> str = String(f).replace(formatRegExp, <span class="keyword">function</span>(x) {
    <span class="keyword">if</span> (x === <span class="string">'%%'</span>) <span class="keyword">return</span> <span class="string">'%'</span>;
    <span class="keyword">if</span> (i >= len) <span class="keyword">return</span> x;
    <span class="keyword">switch</span> (x) {
      <span class="keyword">case</span> <span class="string">'%s'</span>: <span class="keyword">return</span> String(args[i++]);
      <span class="keyword">case</span> <span class="string">'%d'</span>: <span class="keyword">return</span> Number(args[i++]);
      <span class="keyword">case</span> <span class="string">'%j'</span>:
        <span class="keyword">try</span> {
          <span class="keyword">return</span> JSON.stringify(args[i++]);
        } <span class="keyword">catch</span> (_) {
          <span class="keyword">return</span> <span class="string">'[Circular]'</span>;
        }
      <span class="keyword">default</span>:
        <span class="keyword">return</span> x;
    }
  });
  <span class="keyword">for</span> (<span class="keyword">var</span> x = args[i]; i &lt; len; x = args[++i]) {
    <span class="keyword">if</span> (isNull(x) || !isObject(x)) {
      str += <span class="string">' '</span> + x;
    } <span class="keyword">else</span> {
      str += <span class="string">' '</span> + inspect(x);
    }
  }
  <span class="keyword">return</span> str;
};


<span class="comment">// Mark that a method should not be used.</span>
<span class="comment">// Returns a modified function which warns once by default.</span>
<span class="comment">// If --no-deprecation is set, then it is a no-op.</span>
exports.deprecate = <span class="keyword">function</span>(fn, msg) {
  <span class="comment">// Allow for deprecating things in the process of starting up.</span>
  <span class="keyword">if</span> (isUndefined(global.process)) {
    <span class="keyword">return</span> <span class="keyword">function</span>() {
      <span class="keyword">return</span> exports.deprecate(fn, msg).apply(<span class="keyword">this</span>, arguments);
    };
  }

  <span class="keyword">if</span> (process.noDeprecation === <span class="literal">true</span>) {
    <span class="keyword">return</span> fn;
  }

  <span class="keyword">var</span> warned = <span class="literal">false</span>;
  <span class="function"><span class="keyword">function</span> <span class="title">deprecated</span><span class="params">()</span> {</span>
    <span class="keyword">if</span> (!warned) {
      <span class="keyword">if</span> (process.throwDeprecation) {
        <span class="keyword">throw</span> <span class="keyword">new</span> Error(msg);
      } <span class="keyword">else</span> <span class="keyword">if</span> (process.traceDeprecation) {
        console.trace(msg);
      } <span class="keyword">else</span> {
        console.error(msg);
      }
      warned = <span class="literal">true</span>;
    }
    <span class="keyword">return</span> fn.apply(<span class="keyword">this</span>, arguments);
  }

  <span class="keyword">return</span> deprecated;
};


<span class="keyword">var</span> debugs = {};
<span class="keyword">var</span> debugEnviron;
exports.debuglog = <span class="keyword">function</span>(set) {
  <span class="keyword">if</span> (isUndefined(debugEnviron))
    debugEnviron = process.env.NODE_DEBUG || <span class="string">''</span>;
  set = set.toUpperCase();
  <span class="keyword">if</span> (!debugs[set]) {
    <span class="keyword">if</span> (<span class="keyword">new</span> RegExp(<span class="string">'\\b'</span> + set + <span class="string">'\\b'</span>, <span class="string">'i'</span>).test(debugEnviron)) {
      <span class="keyword">var</span> pid = process.pid;
      debugs[set] = <span class="keyword">function</span>() {
        <span class="keyword">var</span> msg = exports.format.apply(exports, arguments);
        console.error(<span class="string">'%s %d: %s'</span>, set, pid, msg);
      };
    } <span class="keyword">else</span> {
      debugs[set] = <span class="keyword">function</span>() {};
    }
  }
  <span class="keyword">return</span> debugs[set];
};


<span class="comment">/**
 * Echos the value of a value. Trys to print the value out
 * in the best way possible given the different types.
 *
 * @param {Object} obj The object to print out.
 * @param {Object} opts Optional options object that alters the output.
 */</span>
<span class="comment">/* legacy: obj, showHidden, depth, colors*/</span>
<span class="function"><span class="keyword">function</span> <span class="title">inspect</span><span class="params">(obj, opts)</span> {</span>
  <span class="comment">// default options</span>
  <span class="keyword">var</span> ctx = {
    seen: [],
    stylize: stylizeNoColor
  };
  <span class="comment">// legacy...</span>
  <span class="keyword">if</span> (arguments.length >= <span class="number">3</span>) ctx.depth = arguments[<span class="number">2</span>];
  <span class="keyword">if</span> (arguments.length >= <span class="number">4</span>) ctx.colors = arguments[<span class="number">3</span>];
  <span class="keyword">if</span> (isBoolean(opts)) {
    <span class="comment">// legacy...</span>
    ctx.showHidden = opts;
  } <span class="keyword">else</span> <span class="keyword">if</span> (opts) {
    <span class="comment">// got an "options" object</span>
    exports._extend(ctx, opts);
  }
  <span class="comment">// set default options</span>
  <span class="keyword">if</span> (isUndefined(ctx.showHidden)) ctx.showHidden = <span class="literal">false</span>;
  <span class="keyword">if</span> (isUndefined(ctx.depth)) ctx.depth = <span class="number">2</span>;
  <span class="keyword">if</span> (isUndefined(ctx.colors)) ctx.colors = <span class="literal">false</span>;
  <span class="keyword">if</span> (isUndefined(ctx.customInspect)) ctx.customInspect = <span class="literal">true</span>;
  <span class="keyword">if</span> (ctx.colors) ctx.stylize = stylizeWithColor;
  <span class="keyword">return</span> formatValue(ctx, obj, ctx.depth);
}
exports.inspect = inspect;


<span class="comment">// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics</span>
inspect.colors = {
  <span class="string">'bold'</span> : [<span class="number">1</span>, <span class="number">22</span>],
  <span class="string">'italic'</span> : [<span class="number">3</span>, <span class="number">23</span>],
  <span class="string">'underline'</span> : [<span class="number">4</span>, <span class="number">24</span>],
  <span class="string">'inverse'</span> : [<span class="number">7</span>, <span class="number">27</span>],
  <span class="string">'white'</span> : [<span class="number">37</span>, <span class="number">39</span>],
  <span class="string">'grey'</span> : [<span class="number">90</span>, <span class="number">39</span>],
  <span class="string">'black'</span> : [<span class="number">30</span>, <span class="number">39</span>],
  <span class="string">'blue'</span> : [<span class="number">34</span>, <span class="number">39</span>],
  <span class="string">'cyan'</span> : [<span class="number">36</span>, <span class="number">39</span>],
  <span class="string">'green'</span> : [<span class="number">32</span>, <span class="number">39</span>],
  <span class="string">'magenta'</span> : [<span class="number">35</span>, <span class="number">39</span>],
  <span class="string">'red'</span> : [<span class="number">31</span>, <span class="number">39</span>],
  <span class="string">'yellow'</span> : [<span class="number">33</span>, <span class="number">39</span>]
};

<span class="comment">// Don't use 'blue' not visible on cmd.exe</span>
inspect.styles = {
  <span class="string">'special'</span>: <span class="string">'cyan'</span>,
  <span class="string">'number'</span>: <span class="string">'yellow'</span>,
  <span class="string">'boolean'</span>: <span class="string">'yellow'</span>,
  <span class="string">'undefined'</span>: <span class="string">'grey'</span>,
  <span class="string">'null'</span>: <span class="string">'bold'</span>,
  <span class="string">'string'</span>: <span class="string">'green'</span>,
  <span class="string">'date'</span>: <span class="string">'magenta'</span>,
  <span class="comment">// "name": intentionally not styling</span>
  <span class="string">'regexp'</span>: <span class="string">'red'</span>
};


<span class="function"><span class="keyword">function</span> <span class="title">stylizeWithColor</span><span class="params">(str, styleType)</span> {</span>
  <span class="keyword">var</span> style = inspect.styles[styleType];

  <span class="keyword">if</span> (style) {
    <span class="keyword">return</span> <span class="string">'\u001b['</span> + inspect.colors[style][<span class="number">0</span>] + <span class="string">'m'</span> + str +
           <span class="string">'\u001b['</span> + inspect.colors[style][<span class="number">1</span>] + <span class="string">'m'</span>;
  } <span class="keyword">else</span> {
    <span class="keyword">return</span> str;
  }
}


<span class="function"><span class="keyword">function</span> <span class="title">stylizeNoColor</span><span class="params">(str, styleType)</span> {</span>
  <span class="keyword">return</span> str;
}


<span class="function"><span class="keyword">function</span> <span class="title">arrayToHash</span><span class="params">(array)</span> {</span>
  <span class="keyword">var</span> hash = {};

  array.forEach(<span class="keyword">function</span>(val, idx) {
    hash[val] = <span class="literal">true</span>;
  });

  <span class="keyword">return</span> hash;
}


<span class="function"><span class="keyword">function</span> <span class="title">formatValue</span><span class="params">(ctx, value, recurseTimes)</span> {</span>
  <span class="comment">// Provide a hook for user-specified inspect functions.</span>
  <span class="comment">// Check that value is an object with an inspect function on it</span>
  <span class="keyword">if</span> (ctx.customInspect &amp;&amp;
      value &amp;&amp;
      isFunction(value.inspect) &amp;&amp;
      <span class="comment">// Filter out the util module, it's inspect function is special</span>
      value.inspect !== exports.inspect &amp;&amp;
      <span class="comment">// Also filter out any prototype objects using the circular check.</span>
      !(value.constructor &amp;&amp; value.constructor.prototype === value)) {
    <span class="keyword">var</span> ret = value.inspect(recurseTimes, ctx);
    <span class="keyword">if</span> (!isString(ret)) {
      ret = formatValue(ctx, ret, recurseTimes);
    }
    <span class="keyword">return</span> ret;
  }

  <span class="comment">// Primitive types cannot have properties</span>
  <span class="keyword">var</span> primitive = formatPrimitive(ctx, value);
  <span class="keyword">if</span> (primitive) {
    <span class="keyword">return</span> primitive;
  }

  <span class="comment">// Look up the keys of the object.</span>
  <span class="keyword">var</span> keys = Object.keys(value);
  <span class="keyword">var</span> visibleKeys = arrayToHash(keys);

  <span class="keyword">if</span> (ctx.showHidden) {
    keys = Object.getOwnPropertyNames(value);
  }

  <span class="comment">// IE doesn't make error fields non-enumerable</span>
  <span class="comment">// http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx</span>
  <span class="keyword">if</span> (isError(value)
      &amp;&amp; (keys.indexOf(<span class="string">'message'</span>) >= <span class="number">0</span> || keys.indexOf(<span class="string">'description'</span>) >= <span class="number">0</span>)) {
    <span class="keyword">return</span> formatError(value);
  }

  <span class="comment">// Some type of object without properties can be shortcutted.</span>
  <span class="keyword">if</span> (keys.length === <span class="number">0</span>) {
    <span class="keyword">if</span> (isFunction(value)) {
      <span class="keyword">var</span> name = value.name ? <span class="string">': '</span> + value.name : <span class="string">''</span>;
      <span class="keyword">return</span> ctx.stylize(<span class="string">'[Function'</span> + name + <span class="string">']'</span>, <span class="string">'special'</span>);
    }
    <span class="keyword">if</span> (isRegExp(value)) {
      <span class="keyword">return</span> ctx.stylize(RegExp.prototype.toString.call(value), <span class="string">'regexp'</span>);
    }
    <span class="keyword">if</span> (isDate(value)) {
      <span class="keyword">return</span> ctx.stylize(Date.prototype.toString.call(value), <span class="string">'date'</span>);
    }
    <span class="keyword">if</span> (isError(value)) {
      <span class="keyword">return</span> formatError(value);
    }
  }

  <span class="keyword">var</span> base = <span class="string">''</span>, array = <span class="literal">false</span>, braces = [<span class="string">'{'</span>, <span class="string">'}'</span>];

  <span class="comment">// Make Array say that they are Array</span>
  <span class="keyword">if</span> (isArray(value)) {
    array = <span class="literal">true</span>;
    braces = [<span class="string">'['</span>, <span class="string">']'</span>];
  }

  <span class="comment">// Make functions say that they are functions</span>
  <span class="keyword">if</span> (isFunction(value)) {
    <span class="keyword">var</span> n = value.name ? <span class="string">': '</span> + value.name : <span class="string">''</span>;
    base = <span class="string">' [Function'</span> + n + <span class="string">']'</span>;
  }

  <span class="comment">// Make RegExps say that they are RegExps</span>
  <span class="keyword">if</span> (isRegExp(value)) {
    base = <span class="string">' '</span> + RegExp.prototype.toString.call(value);
  }

  <span class="comment">// Make dates with properties first say the date</span>
  <span class="keyword">if</span> (isDate(value)) {
    base = <span class="string">' '</span> + Date.prototype.toUTCString.call(value);
  }

  <span class="comment">// Make error with message first say the error</span>
  <span class="keyword">if</span> (isError(value)) {
    base = <span class="string">' '</span> + formatError(value);
  }

  <span class="keyword">if</span> (keys.length === <span class="number">0</span> &amp;&amp; (!array || value.length == <span class="number">0</span>)) {
    <span class="keyword">return</span> braces[<span class="number">0</span>] + base + braces[<span class="number">1</span>];
  }

  <span class="keyword">if</span> (recurseTimes &lt; <span class="number">0</span>) {
    <span class="keyword">if</span> (isRegExp(value)) {
      <span class="keyword">return</span> ctx.stylize(RegExp.prototype.toString.call(value), <span class="string">'regexp'</span>);
    } <span class="keyword">else</span> {
      <span class="keyword">return</span> ctx.stylize(<span class="string">'[Object]'</span>, <span class="string">'special'</span>);
    }
  }

  ctx.seen.push(value);

  <span class="keyword">var</span> output;
  <span class="keyword">if</span> (array) {
    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);
  } <span class="keyword">else</span> {
    output = keys.map(<span class="keyword">function</span>(key) {
      <span class="keyword">return</span> formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);
    });
  }

  ctx.seen.pop();

  <span class="keyword">return</span> reduceToSingleString(output, base, braces);
}


<span class="function"><span class="keyword">function</span> <span class="title">formatPrimitive</span><span class="params">(ctx, value)</span> {</span>
  <span class="keyword">if</span> (isUndefined(value))
    <span class="keyword">return</span> ctx.stylize(<span class="string">'undefined'</span>, <span class="string">'undefined'</span>);
  <span class="keyword">if</span> (isString(value)) {
    <span class="keyword">var</span> simple = <span class="string">'\''</span> + JSON.stringify(value).replace(<span class="regexp">/^"|"$/g</span>, <span class="string">''</span>)
                                             .replace(<span class="regexp">/'/g</span>, <span class="string">"\\'"</span>)
                                             .replace(<span class="regexp">/\\"/g</span>, <span class="string">'"'</span>) + <span class="string">'\''</span>;
    <span class="keyword">return</span> ctx.stylize(simple, <span class="string">'string'</span>);
  }
  <span class="keyword">if</span> (isNumber(value))
    <span class="keyword">return</span> ctx.stylize(<span class="string">''</span> + value, <span class="string">'number'</span>);
  <span class="keyword">if</span> (isBoolean(value))
    <span class="keyword">return</span> ctx.stylize(<span class="string">''</span> + value, <span class="string">'boolean'</span>);
  <span class="comment">// For some reason typeof null is "object", so special case here.</span>
  <span class="keyword">if</span> (isNull(value))
    <span class="keyword">return</span> ctx.stylize(<span class="string">'null'</span>, <span class="string">'null'</span>);
}


<span class="function"><span class="keyword">function</span> <span class="title">formatError</span><span class="params">(value)</span> {</span>
  <span class="keyword">return</span> <span class="string">'['</span> + Error.prototype.toString.call(value) + <span class="string">']'</span>;
}


<span class="function"><span class="keyword">function</span> <span class="title">formatArray</span><span class="params">(ctx, value, recurseTimes, visibleKeys, keys)</span> {</span>
  <span class="keyword">var</span> output = [];
  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, l = value.length; i &lt; l; ++i) {
    <span class="keyword">if</span> (hasOwnProperty(value, String(i))) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          String(i), <span class="literal">true</span>));
    } <span class="keyword">else</span> {
      output.push(<span class="string">''</span>);
    }
  }
  keys.forEach(<span class="keyword">function</span>(key) {
    <span class="keyword">if</span> (!key.match(<span class="regexp">/^\d+$/</span>)) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          key, <span class="literal">true</span>));
    }
  });
  <span class="keyword">return</span> output;
}


<span class="function"><span class="keyword">function</span> <span class="title">formatProperty</span><span class="params">(ctx, value, recurseTimes, visibleKeys, key, array)</span> {</span>
  <span class="keyword">var</span> name, str, desc;
  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };
  <span class="keyword">if</span> (desc.get) {
    <span class="keyword">if</span> (desc.set) {
      str = ctx.stylize(<span class="string">'[Getter/Setter]'</span>, <span class="string">'special'</span>);
    } <span class="keyword">else</span> {
      str = ctx.stylize(<span class="string">'[Getter]'</span>, <span class="string">'special'</span>);
    }
  } <span class="keyword">else</span> {
    <span class="keyword">if</span> (desc.set) {
      str = ctx.stylize(<span class="string">'[Setter]'</span>, <span class="string">'special'</span>);
    }
  }
  <span class="keyword">if</span> (!hasOwnProperty(visibleKeys, key)) {
    name = <span class="string">'['</span> + key + <span class="string">']'</span>;
  }
  <span class="keyword">if</span> (!str) {
    <span class="keyword">if</span> (ctx.seen.indexOf(desc.value) &lt; <span class="number">0</span>) {
      <span class="keyword">if</span> (isNull(recurseTimes)) {
        str = formatValue(ctx, desc.value, <span class="literal">null</span>);
      } <span class="keyword">else</span> {
        str = formatValue(ctx, desc.value, recurseTimes - <span class="number">1</span>);
      }
      <span class="keyword">if</span> (str.indexOf(<span class="string">'\n'</span>) > -<span class="number">1</span>) {
        <span class="keyword">if</span> (array) {
          str = str.split(<span class="string">'\n'</span>).map(<span class="keyword">function</span>(line) {
            <span class="keyword">return</span> <span class="string">'  '</span> + line;
          }).join(<span class="string">'\n'</span>).substr(<span class="number">2</span>);
        } <span class="keyword">else</span> {
          str = <span class="string">'\n'</span> + str.split(<span class="string">'\n'</span>).map(<span class="keyword">function</span>(line) {
            <span class="keyword">return</span> <span class="string">'   '</span> + line;
          }).join(<span class="string">'\n'</span>);
        }
      }
    } <span class="keyword">else</span> {
      str = ctx.stylize(<span class="string">'[Circular]'</span>, <span class="string">'special'</span>);
    }
  }
  <span class="keyword">if</span> (isUndefined(name)) {
    <span class="keyword">if</span> (array &amp;&amp; key.match(<span class="regexp">/^\d+$/</span>)) {
      <span class="keyword">return</span> str;
    }
    name = JSON.stringify(<span class="string">''</span> + key);
    <span class="keyword">if</span> (name.match(<span class="regexp">/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/</span>)) {
      name = name.substr(<span class="number">1</span>, name.length - <span class="number">2</span>);
      name = ctx.stylize(name, <span class="string">'name'</span>);
    } <span class="keyword">else</span> {
      name = name.replace(<span class="regexp">/'/g</span>, <span class="string">"\\'"</span>)
                 .replace(<span class="regexp">/\\"/g</span>, <span class="string">'"'</span>)
                 .replace(<span class="regexp">/(^"|"$)/g</span>, <span class="string">"'"</span>);
      name = ctx.stylize(name, <span class="string">'string'</span>);
    }
  }

  <span class="keyword">return</span> name + <span class="string">': '</span> + str;
}


<span class="function"><span class="keyword">function</span> <span class="title">reduceToSingleString</span><span class="params">(output, base, braces)</span> {</span>
  <span class="keyword">var</span> numLinesEst = <span class="number">0</span>;
  <span class="keyword">var</span> length = output.reduce(<span class="keyword">function</span>(prev, cur) {
    numLinesEst++;
    <span class="keyword">if</span> (cur.indexOf(<span class="string">'\n'</span>) >= <span class="number">0</span>) numLinesEst++;
    <span class="keyword">return</span> prev + cur.replace(<span class="regexp">/\u001b\[\d\d?m/g</span>, <span class="string">''</span>).length + <span class="number">1</span>;
  }, <span class="number">0</span>);

  <span class="keyword">if</span> (length > <span class="number">60</span>) {
    <span class="keyword">return</span> braces[<span class="number">0</span>] +
           (base === <span class="string">''</span> ? <span class="string">''</span> : base + <span class="string">'\n '</span>) +
           <span class="string">' '</span> +
           output.join(<span class="string">',\n  '</span>) +
           <span class="string">' '</span> +
           braces[<span class="number">1</span>];
  }

  <span class="keyword">return</span> braces[<span class="number">0</span>] + base + <span class="string">' '</span> + output.join(<span class="string">', '</span>) + <span class="string">' '</span> + braces[<span class="number">1</span>];
}


<span class="comment">// NOTE: These type checking functions intentionally don't use `instanceof`</span>
<span class="comment">// because it is fragile and can be easily faked with `Object.create()`.</span>
<span class="function"><span class="keyword">function</span> <span class="title">isArray</span><span class="params">(ar)</span> {</span>
  <span class="keyword">return</span> Array.isArray(ar);
}
exports.isArray = isArray;

<span class="function"><span class="keyword">function</span> <span class="title">isBoolean</span><span class="params">(arg)</span> {</span>
  <span class="keyword">return</span> <span class="keyword">typeof</span> arg === <span class="string">'boolean'</span>;
}
exports.isBoolean = isBoolean;

<span class="function"><span class="keyword">function</span> <span class="title">isNull</span><span class="params">(arg)</span> {</span>
  <span class="keyword">return</span> arg === <span class="literal">null</span>;
}
exports.isNull = isNull;

<span class="function"><span class="keyword">function</span> <span class="title">isNullOrUndefined</span><span class="params">(arg)</span> {</span>
  <span class="keyword">return</span> arg == <span class="literal">null</span>;
}
exports.isNullOrUndefined = isNullOrUndefined;

<span class="function"><span class="keyword">function</span> <span class="title">isNumber</span><span class="params">(arg)</span> {</span>
  <span class="keyword">return</span> <span class="keyword">typeof</span> arg === <span class="string">'number'</span>;
}
exports.isNumber = isNumber;

<span class="function"><span class="keyword">function</span> <span class="title">isString</span><span class="params">(arg)</span> {</span>
  <span class="keyword">return</span> <span class="keyword">typeof</span> arg === <span class="string">'string'</span>;
}
exports.isString = isString;

<span class="function"><span class="keyword">function</span> <span class="title">isSymbol</span><span class="params">(arg)</span> {</span>
  <span class="keyword">return</span> <span class="keyword">typeof</span> arg === <span class="string">'symbol'</span>;
}
exports.isSymbol = isSymbol;

<span class="function"><span class="keyword">function</span> <span class="title">isUndefined</span><span class="params">(arg)</span> {</span>
  <span class="keyword">return</span> arg === <span class="keyword">void</span> <span class="number">0</span>;
}
exports.isUndefined = isUndefined;

<span class="function"><span class="keyword">function</span> <span class="title">isRegExp</span><span class="params">(re)</span> {</span>
  <span class="keyword">return</span> isObject(re) &amp;&amp; objectToString(re) === <span class="string">'[object RegExp]'</span>;
}
exports.isRegExp = isRegExp;

<span class="function"><span class="keyword">function</span> <span class="title">isObject</span><span class="params">(arg)</span> {</span>
  <span class="keyword">return</span> <span class="keyword">typeof</span> arg === <span class="string">'object'</span> &amp;&amp; arg !== <span class="literal">null</span>;
}
exports.isObject = isObject;

<span class="function"><span class="keyword">function</span> <span class="title">isDate</span><span class="params">(d)</span> {</span>
  <span class="keyword">return</span> isObject(d) &amp;&amp; objectToString(d) === <span class="string">'[object Date]'</span>;
}
exports.isDate = isDate;

<span class="function"><span class="keyword">function</span> <span class="title">isError</span><span class="params">(e)</span> {</span>
  <span class="keyword">return</span> isObject(e) &amp;&amp;
      (objectToString(e) === <span class="string">'[object Error]'</span> || e <span class="keyword">instanceof</span> Error);
}
exports.isError = isError;

<span class="function"><span class="keyword">function</span> <span class="title">isFunction</span><span class="params">(arg)</span> {</span>
  <span class="keyword">return</span> <span class="keyword">typeof</span> arg === <span class="string">'function'</span>;
}
exports.isFunction = isFunction;

<span class="function"><span class="keyword">function</span> <span class="title">isPrimitive</span><span class="params">(arg)</span> {</span>
  <span class="keyword">return</span> arg === <span class="literal">null</span> ||
         <span class="keyword">typeof</span> arg === <span class="string">'boolean'</span> ||
         <span class="keyword">typeof</span> arg === <span class="string">'number'</span> ||
         <span class="keyword">typeof</span> arg === <span class="string">'string'</span> ||
         <span class="keyword">typeof</span> arg === <span class="string">'symbol'</span> ||  <span class="comment">// ES6 symbol</span>
         <span class="keyword">typeof</span> arg === <span class="string">'undefined'</span>;
}
exports.isPrimitive = isPrimitive;

exports.isBuffer = require(<span class="string">'./support/isBuffer'</span>);

<span class="function"><span class="keyword">function</span> <span class="title">objectToString</span><span class="params">(o)</span> {</span>
  <span class="keyword">return</span> Object.prototype.toString.call(o);
}


<span class="function"><span class="keyword">function</span> <span class="title">pad</span><span class="params">(n)</span> {</span>
  <span class="keyword">return</span> n &lt; <span class="number">10</span> ? <span class="string">'0'</span> + n.toString(<span class="number">10</span>) : n.toString(<span class="number">10</span>);
}


<span class="keyword">var</span> months = [<span class="string">'Jan'</span>, <span class="string">'Feb'</span>, <span class="string">'Mar'</span>, <span class="string">'Apr'</span>, <span class="string">'May'</span>, <span class="string">'Jun'</span>, <span class="string">'Jul'</span>, <span class="string">'Aug'</span>, <span class="string">'Sep'</span>,
              <span class="string">'Oct'</span>, <span class="string">'Nov'</span>, <span class="string">'Dec'</span>];

<span class="comment">// 26 Feb 16:19:34</span>
<span class="function"><span class="keyword">function</span> <span class="title">timestamp</span><span class="params">()</span> {</span>
  <span class="keyword">var</span> d = <span class="keyword">new</span> Date();
  <span class="keyword">var</span> time = [pad(d.getHours()),
              pad(d.getMinutes()),
              pad(d.getSeconds())].join(<span class="string">':'</span>);
  <span class="keyword">return</span> [d.getDate(), months[d.getMonth()], time].join(<span class="string">' '</span>);
}


<span class="comment">// log is just a thin wrapper to console.log that prepends a timestamp</span>
exports.log = <span class="keyword">function</span>() {
  console.log(<span class="string">'%s - %s'</span>, timestamp(), exports.format.apply(exports, arguments));
};


<span class="comment">/**
 * Inherit the prototype methods from one constructor into another.
 *
 * The Function.prototype.inherits from lang.js rewritten as a standalone
 * function (not on Function.prototype). NOTE: If this file is to be loaded
 * during bootstrapping this function needs to be rewritten using some native
 * functions as prototype setup using normal JavaScript does not work as
 * expected during bootstrapping (see mirror.js in r114903).
 *
 * @param {function} ctor Constructor function which needs to inherit the
 *     prototype.
 * @param {function} superCtor Constructor function to inherit prototype from.
 */</span>
exports.inherits = require(<span class="string">'inherits'</span>);

exports._extend = <span class="keyword">function</span>(origin, add) {
  <span class="comment">// Don't do anything if add isn't an object</span>
  <span class="keyword">if</span> (!add || !isObject(add)) <span class="keyword">return</span> origin;

  <span class="keyword">var</span> keys = Object.keys(add);
  <span class="keyword">var</span> i = keys.length;
  <span class="keyword">while</span> (i--) {
    origin[keys[i]] = add[keys[i]];
  }
  <span class="keyword">return</span> origin;
};

<span class="function"><span class="keyword">function</span> <span class="title">hasOwnProperty</span><span class="params">(obj, prop)</span> {</span>
  <span class="keyword">return</span> Object.prototype.hasOwnProperty.call(obj, prop);
}
</code></pre>