<h1>index.js</h1>
<pre><code class="lang-js"><span class="comment">/*global window, global*/</span>
<span class="keyword">var</span> util = require(<span class="string">"util"</span>)
<span class="keyword">var</span> assert = require(<span class="string">"assert"</span>)
<span class="keyword">var</span> now = require(<span class="string">"date-now"</span>)

<span class="keyword">var</span> slice = Array.prototype.slice
<span class="keyword">var</span> console
<span class="keyword">var</span> times = {}

<span class="keyword">if</span> (<span class="keyword">typeof</span> global !== <span class="string">"undefined"</span> &amp;&amp; global.console) {
    console = global.console
} <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> window !== <span class="string">"undefined"</span> &amp;&amp; window.console) {
    console = window.console
} <span class="keyword">else</span> {
    console = {}
}

<span class="keyword">var</span> functions = [
    [log, <span class="string">"log"</span>],
    [info, <span class="string">"info"</span>],
    [warn, <span class="string">"warn"</span>],
    [error, <span class="string">"error"</span>],
    [time, <span class="string">"time"</span>],
    [timeEnd, <span class="string">"timeEnd"</span>],
    [trace, <span class="string">"trace"</span>],
    [dir, <span class="string">"dir"</span>],
    [consoleAssert, <span class="string">"assert"</span>]
]

<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; functions.length; i++) {
    <span class="keyword">var</span> tuple = functions[i]
    <span class="keyword">var</span> f = tuple[<span class="number">0</span>]
    <span class="keyword">var</span> name = tuple[<span class="number">1</span>]

    <span class="keyword">if</span> (!console[name]) {
        console[name] = f
    }
}

module.exports = console

<span class="function"><span class="keyword">function</span> <span class="title">log</span><span class="params">()</span> {</span>}

<span class="function"><span class="keyword">function</span> <span class="title">info</span><span class="params">()</span> {</span>
    console.log.apply(console, arguments)
}

<span class="function"><span class="keyword">function</span> <span class="title">warn</span><span class="params">()</span> {</span>
    console.log.apply(console, arguments)
}

<span class="function"><span class="keyword">function</span> <span class="title">error</span><span class="params">()</span> {</span>
    console.warn.apply(console, arguments)
}

<span class="function"><span class="keyword">function</span> <span class="title">time</span><span class="params">(label)</span> {</span>
    times[label] = now()
}

<span class="function"><span class="keyword">function</span> <span class="title">timeEnd</span><span class="params">(label)</span> {</span>
    <span class="keyword">var</span> time = times[label]
    <span class="keyword">if</span> (!time) {
        <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">"No such label: "</span> + label)
    }

    <span class="keyword">var</span> duration = now() - time
    console.log(label + <span class="string">": "</span> + duration + <span class="string">"ms"</span>)
}

<span class="function"><span class="keyword">function</span> <span class="title">trace</span><span class="params">()</span> {</span>
    <span class="keyword">var</span> err = <span class="keyword">new</span> Error()
    err.name = <span class="string">"Trace"</span>
    err.message = util.format.apply(<span class="literal">null</span>, arguments)
    console.error(err.stack)
}

<span class="function"><span class="keyword">function</span> <span class="title">dir</span><span class="params">(object)</span> {</span>
    console.log(util.inspect(object) + <span class="string">"\n"</span>)
}

<span class="function"><span class="keyword">function</span> <span class="title">consoleAssert</span><span class="params">(expression)</span> {</span>
    <span class="keyword">if</span> (!expression) {
        <span class="keyword">var</span> arr = slice.call(arguments, <span class="number">1</span>)
        assert.ok(<span class="literal">false</span>, util.format.apply(<span class="literal">null</span>, arr))
    }
}
</code></pre>